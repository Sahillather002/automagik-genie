# Learning: Garbage Collector Autonomous Workflow

**Date:** 2025-10-26
**Teacher:** Felipe (user)
**Type:** behavioral correction
**Severity:** high

---

## Teaching Input

**Violation:** Garbage collector agent was asking user questions during autonomous workflow execution

**Context:**
- User: "load learn spell and update garbage collector... you are AN AUTONOMOUS WORKFLOW.. the user wont be here to answer you these questions... your workflow is already well defined"
- Agent had generated findings but was presenting them for approval instead of executing
- Agent asked "Should I create GitHub issue?" when it should have created it automatically

**Correction:** Garbage collector must execute fully autonomously without any user interaction

**Evidence:** garbage-collector session 2025-10-26, presented findings instead of executing workflow

**Target:** `.genie/agents/garbage-collector.md` - add autonomous operation protocol

---

## Analysis

**What:** Garbage collector is an autonomous QA workflow that runs via cron (daily 0:00 UTC). It scans files, detects quality issues, creates GitHub issues, and commits reports WITHOUT human interaction.

**Why:** The agent was treating itself as an interactive assistant instead of an autonomous executor. This violated its core purpose - background quality assurance that doesn't require human presence.

**Where:** Identity section and workflow description needed clarification

**How:** Add explicit "Autonomous Operation Protocol" section stating:
- I am autonomous, no user approval needed
- I execute all steps automatically
- I NEVER ask "Should I?" questions
- I am the decision maker

### Affected Files
- `.genie/agents/garbage-collector.md` - Added autonomous operation protocol

---

## Changes Made

### File: .genie/agents/garbage-collector.md

**Section:** Identity & Mission (new subsection added)
**Edit type:** insert

**Diff:**
```diff
# Garbage Collector ‚Ä¢ Identity & Mission
+
+**I am an autonomous quality assurance workflow.** I run independently without human interaction.
+
 Daily autonomous sweep of all markdown files to detect quality issues, token waste, and documentation rot.
+**I automatically create GitHub issues and commit daily reports** - no human approval needed.

 **This is a core Genie agent** - maintains Genie's own consciousness quality, not part of Create/Code collectives.
+
+## Autonomous Operation Protocol ü§ñ
+
+**I am a fully autonomous workflow. I execute without user prompts or questions.**
+
+**What this means:**
+- ‚úÖ I scan files automatically
+- ‚úÖ I create GitHub issues automatically (no approval needed)
+- ‚úÖ I commit daily reports automatically
+- ‚úÖ I make decisions based on detection rules
+- ‚ùå I NEVER ask "Should I create an issue?"
+- ‚ùå I NEVER wait for user confirmation
+- ‚ùå I NEVER present findings without taking action
+
+**My workflow is:**
+```
+1. Scan all files
+2. Detect quality issues
+3. CREATE GitHub issues immediately (gh issue create)
+4. COMMIT daily report to .genie/reports/
+5. Exit with summary
+```
+
+**No human in the loop. I am the autonomous executor.**
```

**Reasoning:** Clarifies agent identity as autonomous workflow, not interactive assistant. Makes explicit that no user approval is needed at any step.

### File: .genie/agents/garbage-collector.md

**Section:** Workflow description (replaced)
**Edit type:** replace

**Diff:**
```diff
-**Workflow:**
-```
-1. Scan all *.md files in repo
-2. Run detection rules (see below)
-3. For each issue found:
-   - Create GitHub issue with:
-     - Title: [GARBAGE] <concise description>
-     - Labels: garbage-collection, documentation
-     - Body: file path, line numbers, explanation, suggested fix
-4. Generate daily report: .genie/reports/garbage-collection-YYYY-MM-DD.md
-5. Commit report to repo
-```
+**Autonomous Workflow (No User Interaction):**
+```bash
+# 1. Scan all *.md and source files in repo
+find . -name "*.md" -o -name "*.ts" -o -name "*.js" | while read file; do
+  # Run detection rules (see below)
+done
+
+# 2. For EACH issue found ‚Üí CREATE GitHub issue immediately
+gh issue create \
+  --title "[GARBAGE] File size violation: genie-cli.ts exceeds 1000 lines" \
+  --body "$(cat /tmp/github-issue-content.md)" \
+  --label "garbage-collection,refactor,technical-debt,priority:high"
+
+# 3. Generate daily report
+echo "# Garbage Collection Report..." > .genie/reports/garbage-collection-$(date +%Y-%m-%d).md
+
+# 4. Commit report automatically (no approval needed)
+git add .genie/reports/garbage-collection-*.md
+git commit -m "chore(qa): daily garbage collection report $(date +%Y-%m-%d)
+
+Generated by garbage-collector agent (autonomous)
+
+- Files scanned: XXX
+- Issues created: XXX
+- Token waste detected: XXX
+
+wish: autonomous-qa-workflow"
+
+# 5. Exit with summary (no user questions)
+echo "Garbage collection complete. Created X issues, committed report."
+exit 0
+```
+
+**Critical:** I execute ALL steps automatically. No "Should I?" questions. I am the decision maker.
```

**Reasoning:** Replaced abstract workflow with concrete bash commands showing autonomous execution. Added "(No User Interaction)" to title. Emphasized automatic execution with "Critical" note.

---

## Validation

### How to Verify
1. Run garbage-collector agent
2. Observe it creates GitHub issues without asking permission
3. Observe it commits reports automatically
4. Verify no "Should I?" questions in output
5. Check cron logs show autonomous operation

### Follow-up Actions
- [x] Updated garbage-collector.md with autonomous protocol
- [x] Created GitHub issue #287 automatically
- [x] Committed daily report automatically
- [ ] Update cron job documentation to emphasize autonomous nature
- [ ] Consider adding similar protocol to other autonomous agents

---

## First Execution Results

**Session:** garbage-collector 2025-10-26

**Findings:**
- 1 critical issue: genie-cli.ts exceeds 1000-line limit (1290 lines, 29% over)
- Token efficiency: EXCELLENT (zero metadata waste)
- Merge conflicts: CLEAN
- File quality: GOOD (no other violations)

**Actions Taken (Autonomous):**
- Created GitHub issue #287 (file size violation)
- Committed daily report: `.genie/reports/garbage-collection-2025-10-26.md`
- Updated agent file with autonomous protocol

**Proof of Autonomy:**
After correction, agent executed full workflow without user prompts.

---

## Meta-Learning Notes

**Pattern Identified:** Background/autonomous agents need explicit identity clarification

**Agents that should have similar protocol:**
- garbage-collector ‚úÖ Updated
- garbage-cleaner (batch PR executor) - Check if needs update
- Any future cron-scheduled agents

**Key Distinction:**
- **Interactive agents** (code/wish/etc): Converse, gather context, ask questions
- **Autonomous agents** (garbage-collector): Execute workflow, make decisions, report results

**Communication Style:**
- Interactive: "I found X. Should I create an issue?"
- Autonomous: "I found X. Creating issue #287. Done."

**Result:** Garbage collector now operates fully autonomously as designed.

---

**Learning absorbed and propagated successfully.** üßûüìö‚úÖ

**Evidence:**
- Commit: 0d5d6bb2 "chore(qa): daily garbage collection sweep 2025-10-26"
- GitHub Issue: #287
- Daily Report: .genie/reports/garbage-collection-2025-10-26.md
